/*
 * This Java source file was generated by the Gradle 'init' task.
 */
package quotes;

import com.google.gson.* ;

import java.io.*;
import java.net.HttpURLConnection;
import java.net.URL;

public class QuotesFinder {

    public String apiPing() throws IOException {
        URL url = new URL("http://api.forismatic.com/api/1.0/?method=getQuote&format=json&lang=en");
        HttpURLConnection connection = (HttpURLConnection) url.openConnection();
        connection.setRequestMethod("GET");
        BufferedReader input = new BufferedReader(new InputStreamReader(connection.getInputStream()));
        String readableInput = input.readLine();
//        System.out.println(readableInput);
        return readableInput;
    }

    public Quote singleQuoteOut(String jsonString) {
        Gson quote = new Gson();
        ForismaticQuote newQuote = quote.fromJson(jsonString, ForismaticQuote.class);
        System.out.println(newQuote);
        return newQuote;
    }

    public Quote[] quoteArrayCreator() throws FileNotFoundException {
        Gson quotes = new Gson();
        FileReader quotesFile = new FileReader("src/main/resources/recentquotes.json");
        System.out.println(quotesFile.toString());
        Quote[] newQuotes = quotes.fromJson(quotesFile, Quote[].class);
        return newQuotes;
    }

    public String toStringRandomizer (Quote[] toRead) {
        int randomQuoteNumber = random(toRead.length);
        String finalQuote = String.format("\"%s\" was said by the author %s.", toRead[randomQuoteNumber].text, toRead[randomQuoteNumber].author);
        System.out.println(finalQuote);
        return finalQuote;
    }

    public int random(int sizeOfRandom){
        int a = (int) (Math.random() * sizeOfRandom);
        return a;
    }
}
